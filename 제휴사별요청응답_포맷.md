# Partner별 API 요청/응답 포맷

## 개요
이 문서는 제휴사별 API의 요청/응답 포맷을 정리한 문서입니다. 각 제휴사마다 다른 필드명과 구조를 사용하여 실제 운영 환경의 다양성을 시뮬레이션합니다.

- **Partner1, Partner2**: REST API (JSON)
- **Partner3**: REST API (XML)

모든 API는 String 기반 통신을 사용합니다.

---

## Partner1 API

### 1. 주문 생성 API

**엔드포인트:** `POST /api/partner1/orders`  
**Content-Type:** `application/json`

#### 요청 포맷
```json
{
  "orderNumber": "ORDER001",
  "orderDate": "2024-01-15T10:30:00",
  "items": [
    {
      "itemCode": "P001",
      "itemName": "상품1",
      "orderQty": 2,
      "price": 15000.0
    },
    {
      "itemCode": "P002",
      "itemName": "상품2",
      "orderQty": 1,
      "price": 25000.0
    }
  ]
}
```

#### 응답 포맷
```json
{
  "resultCode": "SUCCESS",
  "resultMessage": "주문이 성공적으로 생성되었습니다.",
  "partnerOrderNumber": "P1_1705297800000",
  "orderStatus": "주문접수"
}
```

### 2. 주문 상태 조회 API

**엔드포인트:** `GET /api/partner1/orders/{orderNumber}/status`  
**Content-Type:** `application/json`

- 쿼리파라미터: `itemCode`
- 예시: `GET /api/partner1/orders/ORDER001/status?itemCode=P001`

#### 응답 포맷
```json
{
  "resultCode": "SUCCESS",
  "resultMessage": "주문 상태 조회 성공",
  "orderStatus": "상품준비중",
  "lastUpdateTime": "2024-01-15 14:30:00",
  "deliveryCompany": "CJ배송"
}
```

### 3. 주문 취소 API

**엔드포인트:** `POST /api/partner1/orders/{orderNumber}/cancel`  
**Content-Type:** `application/json`

#### 요청 포맷
```json
{
  "orderNumber": "ORDER001",
  "cancelTime": "2024-01-15 15:30:00",
  "cancelReason": "SIMPLE_CANCEL",
  "itemCode": "P001"
}
```

#### 응답 포맷
```json
{
  "resultCode": "SUCCESS",
  "resultMessage": "주문이 성공적으로 취소되었습니다.",
  "cancelStatus": "CANCELLED"
}
```

#### 요청 필드
- `orderNumber`: 주문번호 (필수)
- `cancelTime`: 취소일시 (필수, 형식: "yyyy-MM-dd HH:mm:ss")
- `cancelReason`: 취소사유 (필수)
- `itemCode`: 상품코드 (필수)

#### 취소 사유 (cancelReason)
- `SIMPLE_CANCEL`: 단순취소
- `REORDER`: 재주문
- `DELIVERY_DELAY`: 배송지연
- `ETC`: 기타

---

## Partner2 API

### 1. 주문 생성 API

**엔드포인트:** `POST /api/partner2/orders`  
**Content-Type:** `application/json`

#### 요청 포맷
```json
{
  "orderId": "ORDER002",
  "orderTimestamp": "2024-01-15T10:30:00",
  "productList": [
    {
      "sku": "ITEM001",
      "name": "상품1",
      "qty": 3,
      "unitCost": 25000.0
    },
    {
      "sku": "ITEM002",
      "name": "상품2",
      "qty": 1,
      "unitCost": 15000.0
    }
  ]
}
```

#### 응답 포맷
```json
{
  "status": "SUCCESS",
  "message": "주문이 성공적으로 생성되었습니다.",
  "merchantOrderId": "P2_1705297800000",
  "currentStatus": "ORDER_RECEIVED"
}
```

### 2. 주문 상태 조회 API

**엔드포인트:** `GET /api/partner2/orders/{orderId}/status`  
**Content-Type:** `application/json`

- 쿼리파라미터: `sku`
- 예시: `GET /api/partner2/orders/ORDER002/status?sku=ITEM001`

#### 응답 포맷
```json
{
  "status": "SUCCESS",
  "message": "주문 상태 조회 성공",
  "currentStatus": "PROCESSING",
  "updatedAt": "2024-01-15 14:30:00",
  "processingCenter": "부산처리센터"
}
```

### 3. 주문 취소 API

**엔드포인트:** `POST /api/partner2/orders/{orderId}/cancel`  
**Content-Type:** `application/json`

#### 요청 포맷
```json
{
  "orderId": "ORDER002",
  "cancelTime": "2024-01-15 15:30:00",
  "reason": "20",
  "sku": "ITEM001"
}
```

#### 응답 포맷
```json
{
  "status": "SUCCESS",
  "message": "주문이 성공적으로 취소되었습니다.",
  "cancelStatus": "CANCELLED"
}
```

#### 요청 필드
- `orderId`: 주문번호 (필수)
- `cancelTime`: 취소일시 (필수, 형식: "yyyy-MM-dd HH:mm:ss")
- `reason`: 취소사유 (필수)
- `sku`: 상품코드 (필수)

#### 취소 사유 (reason)
- `10`: 단순취소
- `20`: 재주문
- `30`: 배송지연
- `40`: 기타

---

## Partner3 API (REST XML)

### 1. 주문 생성 API

**엔드포인트:** `POST /api/partner3/orders`  
**Content-Type:** `application/xml`

#### 요청 포맷 (XML)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<orderRequest>
    <transactionNumber>TXN001</transactionNumber>
    <createdAt>2024-01-15T10:30:00</createdAt>
    <orderDetails>
        <orderItem>
            <productId>PROD001</productId>
            <productTitle>상품1</productTitle>
            <amount>5</amount>
            <cost>12000.0</cost>
        </orderItem>
        <orderItem>
            <productId>PROD002</productId>
            <productTitle>상품2</productTitle>
            <amount>2</amount>
            <cost>8000.0</cost>
        </orderItem>
    </orderDetails>
</orderRequest>
```

#### 응답 포맷 (XML)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<orderResponse>
    <code>200</code>
    <description>주문이 성공적으로 생성되었습니다.</description>
    <affiliateOrderNumber>P3_1705297800000</affiliateOrderNumber>
    <orderState>RECEIVED</orderState>
</orderResponse>
```

### 2. 주문 상태 조회 API

**엔드포인트:** `GET /api/partner3/orders/{transactionNumber}/status`  
**Content-Type:** `application/xml`

- 선택 쿼리파라미터: `productId`
- 예시: `GET /api/partner3/orders/TXN001/status?productId=PROD001`

#### 응답 포맷 (XML)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<statusResponse>
    <code>200</code>
    <description>주문 상태 조회 성공</description>
    <orderState>PREPARING</orderState>
    <modifiedAt>2024-01-15 14:30:00</modifiedAt>
    <shippingMethod>택배</shippingMethod>
</statusResponse>
```

### 3. 주문 취소 API

**엔드포인트:** `POST /api/partner3/orders/{transactionNumber}/cancel`  
**Content-Type:** `application/xml`

#### 요청 포맷 (XML)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<cancelRequest>
    <transactionNumber>TXN001</transactionNumber>
    <cancelTime>2024-01-15 15:30:00</cancelTime>
    <cancelReason>A01</cancelReason>
    <productId>PROD001</productId>
</cancelRequest>
```

#### 응답 포맷 (XML)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<cancelResponse>
    <code>200</code>
    <description>주문이 성공적으로 취소되었습니다.</description>
    <cancelStatus>CANCELLED</cancelStatus>
</cancelResponse>
```

#### 요청 필드
- `orderNumber`: 주문번호 (필수)
- `cancelTime`: 취소일시 (필수, 형식: "yyyy-MM-dd HH:mm:ss")
- `cancelReason`: 취소사유 (필수)
- `productId`: 상품코드 (필수)

#### 취소 사유 (cancelReason)
- `A01`: 단순취소
- `B01`: 재주문
- `C01`: 배송지연
- `D01`: 기타

---

## 제휴사별 특징 비교

### 필드명 차이점

| 구분 | Partner1 | Partner2 | Partner3 |
|------|----------|----------|----------|
| **주문 생성 요청** |
| 주문번호 | `orderNumber` | `orderId` | `transactionNumber` |
| 주문일시 | `orderDate` | `orderTimestamp` | `createdAt` |
| 상품목록 | `items` | `productList` | `orderDetails` |
| 상품코드 | `itemCode` | `sku` | `productId` |
| 상품명 | `itemName` | `name` | `productTitle` |
| 수량 | `orderQty` | `qty` | `amount` |
| 단가 | `price` | `unitCost` | `cost` |
| 프로토콜 | REST (JSON) | REST (JSON) | REST (XML) |

| 구분 | Partner1 | Partner2 | Partner3 |
|------|----------|----------|----------|
| **주문 생성 응답** |
| 결과코드 | `resultCode` | `status` | `code` |
| 결과메시지 | `resultMessage` | `message` | `description` |
| 제휴사주문번호 | `partnerOrderNumber` | `merchantOrderId` | `affiliateOrderNumber` |
| 주문상태 | `orderStatus` | `currentStatus` | `orderState` |

| 구분 | Partner1 | Partner2 | Partner3 |
|------|----------|----------|----------|
| **주문 상태 조회 요청** |
| 주문번호 | `orderNumber` | `orderId` | `transactionNumber` |
| 상품코드 | `itemCode` | `sku` | `productId` |

| 구분 | Partner1 | Partner2 | Partner3 |
|------|----------|----------|----------|
| **주문 상태 조회 응답** |
| 결과코드 | `resultCode` | `status` | `code` |
| 결과메시지 | `resultMessage` | `message` | `description` |
| 주문상태 | `orderStatus` | `currentStatus` | `orderState` |
| 업데이트시간 | `lastUpdateTime` | `updatedAt` | `modifiedAt` |
| 추가정보 | `deliveryCompany` | `processingCenter` | `shippingMethod` |

| 구분 | Partner1 | Partner2 | Partner3 |
|------|----------|----------|----------|
| **주문 취소 요청** |
| 주문번호 | `orderNumber` | `orderId` | `transactionNumber` |
| 취소일시 | `cancelTime` | `cancelTime` | `cancelTime` |
| 취소사유 | `cancelReason` | `reason` | `cancelReason` |
| 상품코드 | `itemCode` | `sku` | `productId` |

| 구분 | Partner1 | Partner2 | Partner3 |
|------|----------|----------|----------|
| **주문 취소 응답** |
| 결과코드 | `resultCode` | `status` | `code` |
| 결과메시지 | `resultMessage` | `message` | `description` |
| 취소상태 | `cancelStatus` | `cancelStatus` | `cancelStatus` |
